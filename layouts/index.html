{{ define "main" }}
<!-- Overall container -->
<div class="container-fluid">
  <div class="row">
    <!-- Left Sidebar - 2 columns on large screens -->
    <div class="col-lg-2 d-none d-lg-block">
      <div class="position-sticky" style="top: 2rem;">
        <!-- Removing Categories section
        <div class="p-4 mb-3 bg-light rounded">
          <h4 class="font-italic">Categories</h4>
          <ul class="list-unstyled mb-0">
            {{ range .Site.Taxonomies.categories }}
            <li>
              <a href="{{ .Page.Permalink }}" style="color: blue; text-decoration: underline;">
                {{ .Page.Title }} ({{ .Count }})
              </a>
            </li>
            {{ end }}
          </ul>
        </div>
        -->

      </div>
    </div>

    <!-- Main Content - 5 columns on large screens -->
    <div class="col-lg-5 mx-auto">
      <!-- Site Title - Centered and large -->
      <div class="text-center mb-5">
        <h1 style="font-size: 3.5rem; font-weight: 800; margin-top: 2rem;">{{ .Site.Title }}</h1>
        <p class="lead">{{ .Site.Params.description }}</p>
      </div>

      <!-- Blog Posts -->
      {{ $paginator := .Paginate (where .Site.RegularPages "Type" "in" .Site.Params.mainSections) }}
      {{ range $paginator.Pages }}
      <div class="blog-post mb-5 pb-5" style="border-bottom: 1px solid #eee;">
        <h2 class="blog-post-title" style="font-weight: 700; text-align: left;">
          <a href="{{ .Permalink }}" style="color: blue; text-decoration: underline;">{{ .Title }}</a>
        </h2>
        <p class="blog-post-meta" style="font-size: 0.9rem; color: #6c757d;">{{ .Date.Format "02-Jan-2006" }}</p>
        
        <div class="blog-post-content" style="text-align: justify;">
          {{ if .Params.image }}
          <img src="{{ .Params.image }}" alt="{{ .Title }}" class="img-fluid mb-3">
          {{ end }}
          
          {{ if .Site.Params.showFullContent }}
            {{ .Content }}
          {{ else }}
            {{ .Summary }}
            {{ if .Truncated }}
            <div class="mt-3">
              <a href="{{ .Permalink }}" style="color: blue; text-decoration: underline;">Read More →</a>
            </div>
            {{ end }}
          {{ end }}
        </div>
      </div>
      {{ end }}

      <!-- Pagination -->
      {{ if gt $paginator.TotalPages 1 }}
      <div class="row mb-5">
        <div class="col-6">
          {{ if $paginator.HasPrev }}
          <a href="{{ $paginator.Prev.URL }}" style="color: blue; text-decoration: underline;">← Newer Posts</a>
          {{ end }}
        </div>
        <div class="col-6 text-right">
          {{ if $paginator.HasNext }}
          <a href="{{ $paginator.Next.URL }}" style="color: blue; text-decoration: underline;">Older Posts →</a>
          {{ end }}
        </div>
      </div>
      {{ end }}
    </div>

    <!-- Right Sidebar - 2 columns on large screens -->
    <div class="col-lg-2 d-none d-lg-block">
      <div class="position-sticky" style="top: 2rem;">
        <div class="p-4 mb-3 bg-light rounded">
          <h4 class="font-italic">Recent Posts</h4>
          <ul class="list-unstyled">
            {{ range first 5 (where .Site.RegularPages "Type" "in" .Site.Params.mainSections) }}
            <li class="mb-1">
              <a href="{{ .Permalink }}" style="color: blue; text-decoration: underline; font-size: 0.9rem;">
                {{ .Title }}
              </a>
            </li>
            {{ end }}
          </ul>
        </div>

        <div class="p-4 bg-light rounded">
          <h4 class="font-italic">Tags</h4>
          <div>
            {{ range first 10 .Site.Taxonomies.tags.ByCount }}
            <a href="{{ .Page.Permalink }}" style="color: blue; text-decoration: underline; font-size: 0.8rem; margin-right: 0.5rem;">
              #{{ .Page.Title }}
            </a>
            {{ end }}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  /* Inline styles to enforce our layout */
  .container-fluid {
    width: 100%;
    padding-right: 15px;
    padding-left: 15px;
    margin-right: auto;
    margin-left: auto;
  }
  .row {
    display: flex;
    flex-wrap: wrap;
    margin-right: -15px;
    margin-left: -15px;
  }
  .col-lg-2 {
    position: relative;
    width: 100%;
    padding-right: 15px;
    padding-left: 15px;
  }
  .col-lg-3 {
    position: relative;
    width: 100%;
    padding-right: 15px;
    padding-left: 15px;
  }
  .col-lg-5 {
    position: relative;
    width: 100%;
    padding-right: 15px;
    padding-left: 15px;
  }
  .mx-auto {
    margin-left: auto !important;
    margin-right: auto !important;
  }
  .d-none {
    display: none !important;
  }
  .position-sticky {
    position: sticky;
  }
  .text-center {
    text-align: center !important;
  }
  .text-right {
    text-align: right !important;
  }
  .rounded {
    border-radius: 0.25rem !important;
  }
  .bg-light {
    background-color: #f8f9fa !important;
  }
  .img-fluid {
    max-width: 100%;
    height: auto;
  }
  .list-unstyled {
    padding-left: 0;
    list-style: none;
  }
  .mb-1 {
    margin-bottom: 0.25rem !important;
  }
  .mb-3 {
    margin-bottom: 1rem !important;
  }
  .mb-5 {
    margin-bottom: 3rem !important;
  }
  .mt-3 {
    margin-top: 1rem !important;
  }
  .pb-5 {
    padding-bottom: 3rem !important;
  }
  .p-4 {
    padding: 1.5rem !important;
  }
  .col-6 {
    flex: 0 0 50%;
    max-width: 50%;
    position: relative;
    width: 100%;
    padding-right: 15px;
    padding-left: 15px;
  }
  .font-italic {
    font-style: italic;
  }
  .lead {
    font-size: 1.25rem;
    font-weight: 300;
  }

  /* Only show sidebars on large screens */
  @media (min-width: 992px) {
    .d-lg-block {
      display: block !important;
    }
    .col-lg-2 {
      flex: 0 0 16.666667%;
      max-width: 16.666667%;
    }
    .col-lg-3 {
      flex: 0 0 25%;
      max-width: 25%;
    }
    .col-lg-5 {
      flex: 0 0 41.666667%;
      max-width: 41.666667%;
    }
  }
</style>
{{ end }}
